<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.zerock.myapp.mapper.SocialMemberMapper">
	<insert id="kakaoSignup" parameterType="java.util.HashMap">

		<selectKey keyProperty="no" order="BEFORE" resultType="java.lang.Integer">
			SELECT "MYMG"."ISEQ$$_99524".nextval FROM dual
		</selectKey>

		INSERT INTO member ( ID, EMAIL, SOCIAL_TYPE)
		VALUES
		(#{id, jdbcType=VARCHAR}, #{email, jdbcType=VARCHAR}, 'KAKAO')
	</insert>

	<update id="kakaoSignupAddInfo"
		parameterType="org.zerock.myapp.domain.MemberDTO">
		<selectKey keyProperty="no" order="BEFORE" resultType="java.lang.Integer">
			SELECT "MYMG"."ISEQ$$_99524".currval FROM dual
		</selectKey>
		update member set
		address1 = #{address1, jdbcType=INTEGER},
		address2 = #{address2, jdbcType=VARCHAR},
		address3 = #{address3, jdbcType=VARCHAR},
		gender = #{gender, jdbcType=VARCHAR},
		birth_year = #{birth_year, jdbcType=INTEGER} ,
		birth_month =#{birth_month, jdbcType=INTEGER} ,
		birth_day = #{birth_day, jdbcType=INTEGER}
		WHERE no = #{no, jdbcType=INTEGER}
	</update>
</mapper>


